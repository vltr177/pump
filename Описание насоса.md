 Управление насосом
1.	Для контроля текущего состояния насоса должны быть предусмотрены четыре основных (взаимоисключающих) состояния:
	- насос включен;
	- насос отключен;
	- насос запускается;
	- насос останавливается.
Помимо четырёх основных состояний должно быть предусмотрено дополнительное состояние «неисправность».

2.	Для контроля исправности и текущего состояния должны быть предусмотрены следующие сигналы:
	- контроль положения магнитного пускателя (пускатель включен / отключен);
	- контроль наличия напряжения в схеме управления;
	- контроль наличия давления на выкиде насоса, характеризующего исправную работу агрегата.

3. Управление насосом должно быть реализовано в следующих режимах:
	- основной (эксплуатация не ограничена);
	- ручной (эксплуатация ограничена);
	- ремонтный (эксплуатация запрещена).

4. Режим «основной» - автоматический режим, предназначенный для эксплуатации исправного насоса. Разрешён пуск по команде оператора и пуск по месту.
Режим «ручной» - наладочный режим, предназначенный для проверки работы цепей контроля магнитного пускателя, цепей контроля оперативного напряжения или проверки уставок датчика давления. Пуск насоса по командам оператора заблокирован. Разрешён пуск по месту. Отсутствует автоматический останов агрегата по результатам неудовлетворительного контроля текущего состояния или по результатам невыполнения команд управления.
Режим «ремонтный» устанавливается автоматически по результатам невыполнения команд управления или по результатам неудовлетворительного контроля текущего состояния насоса, находившегося не в ручном режиме. Может быть установлен оператором. Программа должна подать команду на автоматический останов агрегата. Пуск по месту и пуск по команде оператора должны быть заблокированы.
Кнопка «СТОП» по месту должна работать независимо от выбранного режима управления.
Пуск по месту и пуск по команде оператора должны быть заблокированы до момента деблокирования «неисправности» оператором.

5. Для насоса, находящегося в основном режиме, состояние «включен» должно определяться по следующим условиям:
	- наличие сигнала «МП включен»;
	- увеличение величины «давления на выкиде насоса» выше уставки, характеризующей работающее состояние агрегата.

6. Для насоса, находящегося в основном режиме, состояние «отключен» должно определяться по следующим условиям:
	- наличие сигнала «МП отключен»;
	- снижение величины «давления на выкиде насоса» ниже уставки, характеризующей работающее состояние агрегата.

7. Для насоса, находящегося в основном режиме, состояние «запускается» определяется от момента подачи системой команды управления на «пуск» насоса, или от момента появления сигнала «МП включен» (при пуске по месту), до момента получения состояния агрегата «включен» в соответствии с пунктом «5». Общая продолжительность состояния «запускается» ограничивается по времени контролем продолжительности выполнения команды «пуска». Неполучение состояния «включен» за заданное время должно заканчиваться установкой состояния «неисправность» с переводом в «ремонтный» режим и подачей команды на остановку насоса.

8. Для насоса, находящегося в основном режиме, состояние «останавливается» определяется от момента подачи системой команды управления на «останов» насоса, или от момента появления сигнала «МП отключен» (при остановке по месту), до момента получения состояния насоса «отключен» в соответствии с пунктом «6». Общая продолжительность состояния «останавливается» ограничивается по времени контролем продолжительности выполнения команды «останов». Неполучение состояния «отключен» за заданное время должно заканчиваться установкой состояния «неисправность» с переводом в «ремонтный» режим и подачей команды на остановку насоса.

9. Ограничения при назначении режимов насоса следующие:
	- режимы основной и ручной не могут быть назначены у неисправного насоса;
	- насос не может находиться в автоматических режимах при отсутствии напряжения в схеме управления. В этом случае насосу автоматически должно быть присвоено состояние «неисправность» с переводом в ремонтный режим. Допускается кратковременная потеря напряжения в схеме управления (до 40 секунд) у отключенного агрегата без присвоения состояния «неисправность» и без перевода в ремонтный режим;
	- при назначении оператором основного режима система автоматизации должна проверить соответствие трёх контролируемых параметров, указанных в пункте «2», состоянию насоса (включен, отключен). При обнаружении несоответствия основной режим заменяется на ремонтный;
	- режим (за исключением ремонтного) у насоса не может быть изменён оператором, если агрегат находится в процессе пуска или остановки;
	- ремонтный режим у включенного насоса не может быть изменён пока агрегат не будет отключен.

10. Для управления насосом должны быть предусмотрены следующие команды:
	- пуск от оператора;
	- стоп от оператора;
	- пуск по месту;
	- стоп по месту.
Управление насосом разрешается в соответствии с таблицей 1. 

Таблица 1 - Управление насосом в зависимости от назначенных режимов управления
| Режим|МУ. Пуск по месту.|МУ. Стоп по месту|ДУ. Пуск от оператора|ДУ. Стоп от оператора|
|---|---|---|---|---|
|Основной|ДА|ДА|ДА|ДА|
|Ручной|ДА|НЕТ|ДА|ДА|
|Ремонтный|НЕТ|ДА|НЕТ|ДА|

где МУ - Местное управление;
ДУ - Дистанционное управление.

11. Насос признаётся исправным, если обеспечивается соответствие указанных в пункте «2» параметров друг другу, поданным командам управления и текущему состоянию агрегата. Например: у отключенного агрегата не может быть набрано давления, у включенного агрегата не может быть отключен магнитный пускатель, при включенном магнитном пускателе не может отсутствовать напряжение в схеме управления и т.д. При обнаружении несоответствий (с учётом необходимых временных задержек) у насоса, находящегося в основном режиме, агрегат считается неисправным, должен быть остановлен и переведён в ремонтный режим автоматически.
Подача на насос непрерывных команд управления «пуск», «останов» запрещается. При наличии сигнала «неисправность» команда «стоп» подается постоянно.
Алгоритм управления насосом необходимо реализовать:
- на языке Python;
- на языке ST в среде разработки Epsilon LD v1.6.14.0. для ПЛК Regul R500.
