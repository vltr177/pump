TYPE pump_state :
STRUCT
	
	// СОСТОЯНИЯ
	starts: BOOL:=0;		// насос запускается
	started: BOOL:=0;		// насос включен
	stops: BOOL:=0;			// насос останавливается
	disabled: BOOL:=1;		// насос отключен
	malfunction: BOOL:=0;		// насос неисправен
	
	// РЕЖИМЫ
	main_mode: BOOL:=1;		// насос в основном режиме
	manual_mode: BOOL:=0;		// насос в ручном режиме
	repair_mode: BOOL:=0;		// насос в ремонтном режиме
	
	// ФЛАГИ
	flag_locked: BOOL;		// флаг блокировки клавиатуры
	
	// ТРИГГЕРЫ
	FAL_voltage: F_TRIG;		// триггер отключения напряжения (по сбросу входного сигнала - напряжение)
	// для измерения времени запуска/останова
	RIS_start_op: R_TRIG;		// триггер старт от оператора (по установке выходного сигнала - старт от оператора)
	RIS_stop_op: R_TRIG;		// триггер стоп от оператора (по установке выходного сигнала - стоп от оператора)
	RIS_starter: R_TRIG;		// триггер старт по месту (по установке входного сигнала - МП)
	FAL_starter: F_TRIG;		// триггер стоп по месту (по сбросу входного сигнала - МП)
	
	// ТАЙМЕРЫ
	timer_start: TON;		// таймер запуска насоса
	timer_stop: TON;		// таймер останова насоса
	timer_voltage: TON;		// таймер отсутствия напряжения
	timer_locked: TON;		// таймер блокировки клавиатуры
	
	// ОШИБКИ
	err_voltage: BOOL;		// ошибка возобновления напряжения за время t_voltage
	err_disabled: BOOL;		// ошибка несоответствия состояния Отключен
	err_starts: BOOL;		// ошибка несоответствий состояния Запускается
	err_started: BOOL;		// ошибка несоответствий состояния Включен
	err_stops: BOOL;		// ошибка несоответствий состояния Останавливается
	err_starter: BOOL;		// ошибка несоответствия МП и напряжения
	err_start_time: BOOL;		// ошибка запуска - не установлено состояние Включен за время t_start
	err_stop_time: BOOL;		// ошибка останова - не установлено состояние Отключен за время t_stop
	
	err_cmd: BOOL;			// ошибка одновременной подачи команд
	
END_STRUCT
END_TYPE
